generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id_usuario      Int      @id @default(autoincrement())
  name            String
  senha           String
  email           String   @unique
  data_nasc       DateTime
  criado_em       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  tipo            String
  telefone        String   @unique
  avaliacao_media Float

  motorista  Motorista?  @relation("UsuarioMotorista")
  passageiro Passageiro? @relation("UsuarioPassageiro")
}

model Motorista {
  id              Int               @id
  cnh             String            @unique
  
  veiculos        Veiculo[]
  corridas        Corrida[]
  Corrida_privada Corrida_privada[]

  usuario Usuario @relation("UsuarioMotorista", fields: [id], references: [id_usuario])
}

model Corrida {
  id_corrida   Int          @id @default(autoincrement())
  id_motorista Int
  origem       String
  destino      String
  status       Boolean      @default(true)
  preco        Float
  hora_saida   DateTime
  n_vagas      Int
  passageiros  Passageiro[]

  motorista Motorista @relation(fields: [id_motorista], references: [id])
}

model Corrida_privada {
  id_corrida_privada Int          @id @default(autoincrement())
  id_motorista       Int
  status             Boolean      @default(true)
  n_vagas            Int
  passageiros        Passageiro[]

  motorista Motorista @relation(fields: [id_motorista], references: [id])
}

model Passageiro {
  id               Int             @id
  corridaId        Int
  corridaPrivadaId Int
  usuario          Usuario         @relation("UsuarioPassageiro", fields: [id], references: [id_usuario])
  corrida          Corrida         @relation(fields: [corridaId], references: [id_corrida])
  corrida_privada  Corrida_privada @relation(fields: [corridaPrivadaId], references: [id_corrida_privada])
}

model Veiculo {
  veiculo_marca             String
  veiculo_placa             String  @unique
  veiculo_modelo            String
  id_motorista              Int
  suporteCrian√ßas           Boolean @default(false)
  suportePessoasDeficientes Boolean @default(false)

  dono Motorista @relation(fields: [id_motorista], references: [id])
}